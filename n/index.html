<!DOCTYPE html>
<html>
<head>
<title>nicol;st</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="shortcut icon" href="favicon.ico">
<!-- bootstrap -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
<style type="text/css">
*{font-size: 13px}
button.close span{font-size: 16px !important}
.dragging{border :1px solid #0B85A1 !important;background-color: #d4edda !important}
.is-invalid{background-color: #f8d7da}
.btn, button, label {cursor: pointer;}
.removevideo {cursor: pointer;color: #aaa}
.videolist{padding: .5em 0}
.list-group-item, .pointer{cursor: pointer;transition: background-color 0.1s ease-in-out 0s;}
.selected, .list-group-item:hover{background-color: #f1f1f1;}
#menu {display: none;position: absolute;}
.form-inline *{margin-right: 5px}
#sr, #random{display: none;border:1px solid #ddd;border-radius: 5px;}
#sr h5{margin-top: 1em}
#sr h4{margin: .5em 0}
#history, #registry {position: absolute;margin: 0;border-top: none;border-radius: 0 0 5px 5px}
.undo{text-decoration: underline;cursor: pointer;margin-left: 1em}
#button:disabled{cursor: initial;}
.bold{font-weight: bold;}
.confirmedit{padding-top: 1em}
.gray{color: #777;font-style: italic;}
.sm-thumb{
	width: 91px!important;
	max-width: 91px!important;
	text-align: center;
	color: #333;
	font-style: italic;
	display: inline-block;
}
.full-thumb{
	width: 130px!important;
	max-width: 130px!important;
	text-align: center;
	color: #333;
	font-style: italic;
	display: inline-block;
}
.ccgenrename{color: #2c6cd3;margin: 0.5em;cursor: pointer;transition: color 0.1s ease-in-out 0s;}
.ccgenrename:hover{color: #9fbff2}
.ccgenrename span{color: #000!important}
.ccwrapper{
	display: none;
	border-radius: 5px;
	border:1px solid #eee;
	padding: 8px;
	margin:5px 0;
}
.ccvideo{
	border-left:2px solid transparent;
	border-right:2px solid transparent;
	padding: 0 5px;
	cursor: pointer;
	transition: background-color,border-color,color 0.1s ease-in-out 0s;
}
.ccvideo:hover{border-left-color: #4BB363;border-right-color: #4BB363;color: #417238}
.cctable td{border-bottom:1px solid #eee;}
.cctable td:last{border-bottom:none;}
.rightvideo{border-bottom:1px solid #d9eef4;margin-bottom: 0.2em}
div.tdftdiv{
	padding:3px;
	line-height:16px;
}
ul.tdftad{
	margin:0;
	padding:0;
}
ul.tdftad li{
	display:inline;
	background-position:left center;
	background-repeat:no-repeat;
	padding:0 4px 0 8px;
	font-size:13px;
}
ul.tdftad li.tdftpr{
	padding-left:20px;
}
ul.tdftad li.tdftlink{
	padding-left:25px;
}
ul.tdftad li a:hover{
	text-decoration:none;
}
.silent{
	display: none;
}
div.sgg{
	border-radius: 5px;
	padding: .7em 1em;
	border:1px solid #ddd;
	cursor: pointer;
	margin: .3em;
}
div.sgdef{
	background-color: #eee;
}
</style>
</head>

<body onload="init()" onunload="unload()">
<div id="body">
	<div class="container">
		<h1>nicol;st</h1>

		<!-- ALERT -->
		<div id="alert">
		</div>
		<!-- ALERT ends -->

		<div class="form-group input-group">
			<span class="input-group-addon" id="basic-addon1">url</span>
			<input type="text" class="form-control" id="url" aria-describedby="basic-addon1">
			<span class="input-group-addon" id="basic-addon2">title</span>
			<input type="text" class="form-control" id="title" aria-describedby="basic-addon2">
		</div>

		<div class="form-group">
			<select class="form-control" role="genre" id="genre"></select>
		</div>

		<div class="form-group form-inline">
			<button type="submit" class="btn btn-primary mb-1 mt-1" id="button" disabled="">追加</button>
			<button type="submit" class="btn btn-outline-primary mb-1 mt-1" data-toggle="modal" data-target="#genreModal" onclick="$('#alert-genre').html('');">ジャンル追加</button>
			<button type="submit" class="btn btn-outline-primary mb-1 mt-1" id="ccopen">複数動画を移動/コピー</button>
			<input class="form-control mb-1 mt-1" type="text" placeholder="Search" aria-label="Search" id="searchQuery">
			<button class="btn btn-outline-success mb-1 mt-1" type="submit" id="search">検索</button>
			<button class="btn btn-outline-info mb-1 mt-1" type="submit" onclick="randomFromAll()">ランダム</button>
			<button class="btn btn-outline-info mb-1 mt-1" type="submit" onclick="randomFromSel()">選択中のジャンルからランダム</button>
			<button class="btn btn-outline-secondary mb-1 mt-1" type="submit" data-toggle="modal" data-target="#prefModal">設定</button>
			<button class="btn btn-outline-secondary mb-1 mt-1" type="submit" id="sgopen">ジャンルを並び替え</button>
		</div>

		<div id="play"></div>
		<div id="controller" class="mb-3 mt-1">
			<button class="btn btn-outline-secondary silent" type="submit" onclick="previous()" id="pcprev">前の動画</button>
			<button class="btn btn-outline-secondary silent" type="submit" onclick="next()" id="pcnext">次の動画</button>
			<button class="btn btn-outline-secondary silent" type="submit" id="pcclose">閉じる</button>
			<button class="btn btn-outline-secondary silent" type="submit" id="pcnewtab">別タブで視聴</button>

		</div>

		<div id="random" class="alert">
			<div id="randomVideo"></div>
		</div>

		<div id="sr" class="alert"></div>

		<div class="row" style="margin: 2em 0">
			<ul class="list-group col-sm-3 mb-4" style="display: inline-block;" id="left"></ul>
			<div class="col" style="display: inline-block;padding:0;" id="right"></div>
		</div>

		<footer style="margin-top: 3em">
			<p>HTML5, Javascript, LocalStorageを使用しています。一部のブラウザでは動作しない可能性があります。<br>&copy; 2017 fine_diary, all rights reserved. Powered by <a href="https://jquery.com/" target="_blank">jQuery</a>, <a href="https://getbootstrap.com/" target="_blank">bootstrap</a>, <a href="http://rubaxa.github.io/Sortable/" target="_blank">Sortable.js</a></p>
		</footer>
	</div>
</div>
<!-- container ends -->

<!-- ADD GENRE MODAL -->
<div class="modal fade" id="genreModal" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">ADD GENRE</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">

				<div id="alert-genre">
				</div>
				<div class="form-group">
					<input type="text" class="form-control" id="genrename" placeholder="genre name">
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" id="addgenre">ジャンルを追加</button>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">キャンセル</button>
			</div>
		</div>
	</div>
</div>
<!-- ADD GENRE MODAL ends -->

<!-- CREATE COPY MODAL -->
<div class="modal fade" id="ccModal" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">COPY VIDEOS</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<p>複数動画を移動/コピー</p>

				<div id="ccalert"></div>

				<div class="form-group">
					<select class="custom-select mr-sm-2" id="ccnew" onchange="ccnew();">
						<option value="copytoold">既存のジャンルにコピー</option>
						<option value="movetoold">既存のジャンルに移動</option>
						<option value="copytonew">新しいジャンルにコピー</option>
						<option value="movetonew">新しいジャンルに移動</option>
					</select>
					<div id="ccoldform" class="mt-1">
						<span class="text-muted">移動先のジャンルを選択: </span><select class="custom-select mr-sm-2" role="genre" id="ccoldsel"></select>
					</div>
					<div id="ccnewform" class="mt-1">
						<input type="text" class="form-control" id="ccname" placeholder="新しいジャンルの名前を入力...">
					</div>
				</div>

				<div>
					<label class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="nicolist_thumb_cc" checked="" onchange="cctntoggle()">
						<span class="custom-control-indicator"></span>
						<span class="custom-control-description">サムネイルを表示</span>
					</label>
				</div>
				<hr>
				<p class="text-muted">移動する動画をクリックして選択してください。</p>
				<div id="ccvideos">

				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" id="createcopy">コピー/移動</button>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">キャンセル</button>
			</div>
		</div>
	</div>
</div>
<!-- CREATE COPY MODAL ends -->

<!-- EDIT VIDEO MODAL -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">EDIT</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div id="emalert"></div>
				<div class="d-flex flex-row">
					<div class="mr-4" style="display: inline-block;">
						<img src="" alt="No Image" id="editThumb" class="img-thumbnail edit_thumb">
					</div>
					<div class="col-auto">
						<div class="form-group">
							<a href="" target="_blank">
								<button class="btn btn-secondary" id="editUrl"></button>
							</a>
						</div>
						<div class="form-group">
							<input type="text" class="form-control" id="editTitle">
						</div>
						<div class="form-group">
							<select class="form-control" role="genre" id="editGenre"></select>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" id="saveEdit">変更を保存</button>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">キャンセル</button>
			</div>
		</div>
	</div>
</div>
<!-- EDIT VIDEO MODAL ends -->


<!-- CONFIRM MODAL -->
<div class="modal fade" id="confModal" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">CONFIRM</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<span id="confDialog"></span>
			</div>
			<div class="modal-footer">
				<span id="confOK">はい</span>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">キャンセル</button>
			</div>
		</div>
	</div>
</div>
<!-- CONFIRM MODAL ends -->


<!-- GENRE SORT MODAL -->
<div class="modal fade" id="genreSortModal" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">SORT GENRE LIST</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div id="sggenre"></div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" id="submitGenreSort">適用</button>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">キャンセル</button>
			</div>
		</div>
	</div>
</div>
<!-- CONFIRM MODAL ends -->


<!-- PREFERENCE MODAL -->
<div class="modal fade" id="prefModal" tabindex="-1" role="dialog" aria-labelledby="prefModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">PREFERENCES</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div id="prefalert"></div>

				<div>
					<label class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="nicolist_del">
						<span class="custom-control-indicator"></span>
						<span class="custom-control-description">確認画面を表示しない</span>
					</label>
				</div>

				<div>
					<label class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="nicolist_thumb" onchange="refresh('v')">
						<span class="custom-control-indicator"></span>
						<span class="custom-control-description">一覧でサムネイル画像を表示する</span>
					</label>
				</div>

				<div>
					<label class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="nicolist_thumb_res" checked="">
						<span class="custom-control-indicator"></span>
						<span class="custom-control-description">検索結果・ランダム選出の結果でサムネイル画像を表示する</span>
					</label>
				</div>

				<div>
					<label class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="nicolist_rand" checked="">
						<span class="custom-control-indicator"></span>
						<span class="custom-control-description">前回のランダム選出を残さない</span>
					</label>
				</div>

				<div>
					<label class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="nicolist_and" checked="">
						<span class="custom-control-indicator"></span>
						<span class="custom-control-description">AND検索をする</span>
					</label>
				</div>

				<div>
					<label class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="nicolist_sort" onchange="refresh('v')" checked="">
						<span class="custom-control-indicator"></span>
						<span class="custom-control-description">新しいものが上に来るように表示する</span>
					</label>
				</div>

				<div>
					<label class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="nicolist_cinematic" onchange="videoResize()">
						<span class="custom-control-indicator"></span>
						<span class="custom-control-description">動画をシネマティックモードで再生する</span>
					</label>
				</div>

				<hr>

				<div class="mt-4 mb-1 form-inline">
					<input type="number" name="" style="max-width: 5em" id="nicolist_historyCount" value="7" class="form-control" size="">個まで検索履歴を表示する
				</div>

				<div class="mb-4 form-inline">
					<input type="number" name="" style="max-width: 5em" id="nicolist_msc" value="75" class="form-control" size="">個以上がヒットした場合表示しない
				</div>

				<hr>

				<p>エクスポート <span id="length"></span></p>
				<div>
					<button type="submit" class="btn btn-outline-primary mb-3" id="issueRaw">データのバックアップファイルを保存</button>
				</div>
				<div class="form-group">
					<textarea class="form-control" id="out" rows="3" onclick="this.focus();this.select()" readonly="readonly"></textarea>
				</div>

				<hr>

				<p>インポート</p>
				<div>
					<input type="file" class="btn btn-outline-primary" id="fromRawFile">
				</div>
				<hr>
				<button type="button" class="btn btn-outline-secondary" data-dismiss="modal">閉じる</button>
			</div>
		</div>
	</div>
</div>
<!-- PREFERENCE MODAL ends -->

<!-- VIDEO LINK CONTEXT MENU -->
<div class="dropdown-menu" id="menu">
	<a class="dropdown-item" role="title"></a>
	<div class="dropdown-divider"></div>
	<a class="dropdown-item pointer" role="play">このページで視聴</a>
	<a class="dropdown-item pointer" role="playall">ここから連続再生</a>
	<a class="dropdown-item pointer" role="open">新しいタブで開く</a>
	<a class="dropdown-item pointer" role="edit">編集する</a>
	<a class="dropdown-item pointer" role="remove">削除する</a>
</div>
<!-- VIDEO LINK CONTEXT MENU ends -->

<!-- SEARCH HISTORY -->
<div class="dropdown-menu" id="history"></div>
<!-- SEARCH HISTORY ends -->

<!-- VIDEO ALREADY REGISTERED OR NOT -->
<div class="dropdown-menu" id="registry"></div>
<!-- VIDEO ALREADY REGISTERED OR NOT ends -->

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<!-- bootstrap -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
<!-- Sortable -->
<script type="text/javascript" src="Sortable.min.js"></script>
<!-- Youtube iframe api-->
<script type="text/javascript" src="https://www.youtube.com/iframe_api"></script>
<script type="text/javascript" src="dom.js"></script>
</body>
</html>